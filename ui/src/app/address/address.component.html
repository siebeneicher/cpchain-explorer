<section class="section">
<div class="container">

	<h3 class="subtitle is-size-4">
		Address {{addr}}
		<i ngxClipboard [cbContent]="addr" class="typcn typcn-clipboard is-clickable"></i>
	</h3>

	<div *ngIf="!invalidAddress">

		<table class="table table is-hoverable table is-fullwidth is-striped">
			<tbody>
				<tr><td>Balance</td><td>{{info.latest_balance}} CPC (Rank: {{info.rank}}th, {{info.balance_pct_of_total | number : '1.3-3'}}%)</td></tr>
				<tr><td>Type</td><td>TODO</td></tr>
			</tbody>
		</table>

		<div class="submenu tabs">
			<ul>
				<li [class.is-active]="submenu == 'trxs'" class="is-size-5"><a (click)="setSubmenu('trxs')">
					Transactions&nbsp;
					<span *ngIf="!loadingTrx">({{transactions.length}})</span>
				</a></li>
				<li [class.is-active]="submenu == 'blocks'" class="is-size-5"><a (click)="setSubmenu('blocks')">
					Proposed Blocks&nbsp;
					<span *ngIf="!loadingBlocks">({{blocks.length}})</span>
				</a></li>
			</ul>
		</div>

		<div class="sub-trxs" *ngIf="submenu == 'trxs'">
			<table class="table table is-hoverable table is-fullwidth is-striped" *ngIf="transactions.length">
				<thead>
					<th>TxHash</th>
					<th>Block</th>
					<th>When</th>
					<th>From</th>
					<th></th>
					<th>To</th>
					<th>Value</th>
					<th>TxFee</th>
				</thead>
				<tbody>
					<ng-container *ngFor="let trx of transactions; let i = index">
						<tr *ngIf="i < trx_limit">
							<td><a [routerLink]="['/trx', trx.hash]">{{trx.hash | slice:0:12}}...</a></td>
							<td><a [routerLink]="['/block', trx.blockNumber]">{{trx.blockNumber}}</a></td>
							<td>{{trx.__ts | dateAgo}} | {{trx.__ts | date: 'long' : 'UTC' }}</td>
							<td><a [routerLink]="['/address', trx.from]">{{trx.from | slice:0:12}}...</a></td>
							<td><span class="in-out tag is-normal is-{{ trx.from == addr ? 'warning' : 'success' }}">{{ trx.from == addr ? 'OUT' : 'IN' }}</span></td>
							<td><a [routerLink]="['/address', trx.to]">{{trx.to | slice:0:12}}...</a></td>
							<td>{{trx.value | convertCpc }} CPC</td>
							<td>TODO</td>
						</tr>
					</ng-container>
				</tbody>
			</table>

			<div class="container has-text-centered" *ngIf="transactions.length > trx_limit">
				<a class="button is-small" (click)="showMore('trx_limit')"><i class="typcn typcn-arrow-sorted-down"></i> Show more</a>
				<a class="button is-small" (click)="showAll('trx_limit')"><i class="typcn typcn-arrow-sorted-down"></i> Show all</a>
			</div>
		</div>

		<div class="sub-blocks" *ngIf="submenu == 'blocks'">
			<table class="table table is-hoverable table is-fullwidth is-striped" *ngIf="blocks.length">
				<thead>
					<th>Block</th>
					<th>State</th>
					<th>Trxs</th>
					<th>When</th>
				</thead>
				<tbody>
					<ng-container *ngFor="let blk of blocks; let i = index">
						<tr *ngIf="i < blocks_limit">
							<td><a [routerLink]="['/block', blk.number]">{{blk.number}}</a></td>
							<td>
								<span *ngIf="!blk.__impeached"><i class="typcn typcn-tick"></i> Success</span>
								<span *ngIf="blk.__impeached"><i class="typcn typcn-cancel"></i> Failed</span>
							</td>
							<td><a [routerLink]="['/block', blk.number]">{{blk.transactions.length}}</a></td>
							<td>{{blk.timestamp | dateAgo}} | {{blk.timestamp | date: 'long' : 'UTC' }}</td>
						</tr>
					</ng-container>
				</tbody>
			</table>

			<div class="container has-text-centered" *ngIf="blocks.length > blocks_limit">
				<a class="button is-small" (click)="showMore('blocks_limit')"><i class="typcn typcn-arrow-sorted-down"></i> Show more</a>
				<a class="button is-small" (click)="showAll('blocks_limit')"><i class="typcn typcn-arrow-sorted-down"></i> Show all</a>
			</div>
		</div>

	</div>

	<div class="" *ngIf="invalidAddress">
		<i class="typcn typcn-warning"></i> Invalid Address
	</div>

</div>
</section>

<app-footer></app-footer>